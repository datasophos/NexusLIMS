Refactored test suite to use marker-based infrastructure with opt-in database/file resources via `@pytest.mark.needs_db` and `@pytest.mark.needs_files` markers. Replaced autouse fixtures with on-demand `DatabaseFactory` and `FileFactory` for resource allocation. This delivers large performance improvement for tests that don't need database access, while maintaining 100% backward compatibility with existing tests and preventing cross-test pollution issues.
