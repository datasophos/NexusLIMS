
<!DOCTYPE html>


<html lang="en" data-content_root="./" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Instrument Profiles &#8212; NexusLIMS 2.1.0 documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  <!--
    this give us a css class that will be invisible only if js is disabled
  -->
  <noscript>
    <style>
      .pst-js-only { display: none !important; }

    </style>
  </noscript>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />
<link href="_static/styles/pydata-sphinx-theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />

    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="_static/autodoc_pydantic.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-design.min.css?v=95c83b7e" />
    <link rel="stylesheet" type="text/css" href="_static/custom.css?v=af02a5b6" />
  
  <!-- So that users can add custom icons -->
  <script src="_static/scripts/fontawesome.js?digest=8878045cc6db502f8baf"></script>
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf" />
<link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf" />

    <script src="_static/documentation_options.js?v=20623aea"></script>
    <script src="_static/doctools.js?v=9bcbadda"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/design-tabs.js?v=f930bc37"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'instrument_profiles';</script>
    <script>
        DOCUMENTATION_OPTIONS.theme_version = '0.16.1';
        DOCUMENTATION_OPTIONS.theme_switcher_json_url = '_static/switcher.json';
        DOCUMENTATION_OPTIONS.theme_switcher_version_match = 'pr-17';
        DOCUMENTATION_OPTIONS.show_version_warning_banner =
            true;
        </script>
    <link rel="canonical" href="https://datasophos.github.io/NexusLIMS/pr-17/instrument_profiles.html" />
    <link rel="icon" href="_static/nexusLIMS_bare_logo.ico"/>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Examples" href="examples.html" />
    <link rel="prev" title="Writing Extractor Plugins" href="writing_extractor_plugins.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  <meta name="docsearch:version" content="2.1.0" />
    <meta name="docbuild:last-update" content="Dec, 16, 2025"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <dialog id="pst-search-dialog">
    
<form class="bd-search d-flex align-items-center"
      action="search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
  </dialog>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
<div class="bd-header__inner bd-page-width">
  <button class="pst-navbar-icon sidebar-toggle primary-toggle" aria-label="Site navigation">
    <span class="fa-solid fa-bars"></span>
  </button>
  
  
  <div class="col-lg-3 navbar-header-items__start">
    
      <div class="navbar-item">

  
    
  

<a class="navbar-brand logo" href="index.html">
  
  
  
  
  
    
    
      
    
    
    <img src="_static/logo_horizontal_light.png" class="logo__image only-light" alt="NexusLIMS 2.1.0 documentation - Home"/>
    <img src="_static/logo_horizontal_dark.png" class="logo__image only-dark pst-js-only" alt="NexusLIMS 2.1.0 documentation - Home"/>
  
  
</a></div>
    
      <div class="navbar-item">
<div class="version-switcher__container dropdown pst-js-only">
  <button id="pst-version-switcher-button-2"
    type="button"
    class="version-switcher__button btn btn-sm dropdown-toggle"
    data-bs-toggle="dropdown"
    aria-haspopup="listbox"
    aria-controls="pst-version-switcher-list-2"
    aria-label="Version switcher list"
  >
    Choose version  <!-- this text may get changed later by javascript -->
    <span class="caret"></span>
  </button>
  <div id="pst-version-switcher-list-2"
    class="version-switcher__menu dropdown-menu list-group-flush py-0"
    role="listbox" aria-labelledby="pst-version-switcher-button-2">
    <!-- dropdown will be populated by javascript on page load -->
  </div>
</div></div>
    
  </div>
  
  <div class="col-lg-9 navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item ">
  <a class="nav-link nav-internal" href="index.html">
    Home
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="getting_started.html">
    Getting Started
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="migration.html">
    Migration Guide: v1 to v2
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="user_guide.html">
    User Guide
  </a>
</li>


<li class="nav-item current active">
  <a class="nav-link nav-internal" href="dev_guide.html">
    Developer Guide
  </a>
</li>

            <li class="nav-item dropdown">
                <button class="btn dropdown-toggle nav-item" type="button"
                data-bs-toggle="dropdown" aria-expanded="false"
                aria-controls="pst-nav-more-links">
                    More
                </button>
                <ul id="pst-nav-more-links" class="dropdown-menu">
                    
<li class=" ">
  <a class="nav-link dropdown-item nav-internal" href="reference.html">
    Reference
  </a>
</li>

                </ul>
            </li>
            
  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
      
        <div class="navbar-item">

<button class="btn btn-sm pst-navbar-icon search-button search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
</button></div>
      
        <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
      
        <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/datasophos/NexusLIMS" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-square-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://datasophos.co" title="Datasophos" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-solid fa-globe fa-lg" aria-hidden="true"></i>
            <span class="sr-only">Datasophos</span></a>
        </li>
</ul></div>
      
    </div>
    
  </div>
  
  

  
    <button class="pst-navbar-icon sidebar-toggle secondary-toggle" aria-label="On this page">
      <span class="fa-solid fa-outdent"></span>
    </button>
  
</div>

    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <dialog id="pst-primary-sidebar-modal"></dialog>
      <div id="pst-primary-sidebar" class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          
          
            <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item ">
  <a class="nav-link nav-internal" href="index.html">
    Home
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="getting_started.html">
    Getting Started
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="migration.html">
    Migration Guide: v1 to v2
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="user_guide.html">
    User Guide
  </a>
</li>


<li class="nav-item current active">
  <a class="nav-link nav-internal" href="dev_guide.html">
    Developer Guide
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="reference.html">
    Reference
  </a>
</li>

  </ul>
</nav></div>
          
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">

<button class="btn btn-sm pst-navbar-icon search-button search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
</button></div>
        
          <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
        
          <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/datasophos/NexusLIMS" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-square-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://datasophos.co" title="Datasophos" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-solid fa-globe fa-lg" aria-hidden="true"></i>
            <span class="sr-only">Datasophos</span></a>
        </li>
</ul></div>
        
      </div>
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
<nav class="bd-docs-nav bd-links"
     aria-label="Section Navigation">
  <p class="bd-links__title" role="heading" aria-level="1">Section Navigation</p>
  <div class="bd-toc-item navbar-nav"><ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="development.html">Developer documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="writing_extractor_plugins.html">Writing Extractor Plugins</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Instrument Profiles</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples.html">Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="uv_migration.html">Migration from Poetry to uv</a></li>
<li class="toctree-l1"><a class="reference internal" href="database.html">NexusLIMS database</a></li>
<li class="toctree-l1"><a class="reference internal" href="schema_documentation.html">XML Schema Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="testing/integration-tests.html">Integration Testing Guide</a></li>
</ul>
</div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
      <div class="sidebar-primary-item">
<div id="ethical-ad-placement"
      class="flat"
      data-ea-publisher="readthedocs"
      data-ea-type="readthedocs-sidebar"
      data-ea-manual="true">
</div></div>
  </div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">

<nav aria-label="Breadcrumb" class="d-print-none">
  <ul class="bd-breadcrumbs">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    
    <li class="breadcrumb-item"><a href="dev_guide.html" class="nav-link">Developer Guide</a></li>
    
    <li class="breadcrumb-item active" aria-current="page"><span class="ellipsis">Instrument Profiles</span></li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="instrument-profiles">
<span id="id1"></span><h1>Instrument Profiles<a class="headerlink" href="#instrument-profiles" title="Link to this heading">#</a></h1>
<section id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Link to this heading">#</a></h2>
<p>Instrument profiles provide a powerful mechanism for customizing metadata extraction behavior for specific microscopes without modifying core extractor code. This system is critical for NexusLIMS extensibility, as each installation has unique instruments with specific metadata quirks.</p>
<p>NexusLIMS supports both <strong>built-in profiles</strong> (shipped with the codebase) and <strong>local profiles</strong> (stored outside the codebase). Local profiles are ideal for site-specific instruments, allowing you to maintain custom configurations independently of NexusLIMS updates.</p>
</section>
<section id="what-are-instrument-profiles">
<h2>What are Instrument Profiles?<a class="headerlink" href="#what-are-instrument-profiles" title="Link to this heading">#</a></h2>
<p>An instrument profile is a collection of:</p>
<ul class="simple">
<li><p><strong>Parser functions</strong>: Custom logic to process metadata for a specific instrument</p></li>
<li><p><strong>Transformations</strong>: Functions to modify extracted metadata values</p></li>
<li><p><strong>Extractor overrides</strong>: Force specific extractors for certain file types</p></li>
<li><p><strong>Static metadata</strong>: Pre-defined values to inject for all files from this instrument</p></li>
</ul>
<p>Profiles are automatically discovered and registered when NexusLIMS starts, making it easy to add instrument-specific customizations without touching the core codebase.</p>
</section>
<section id="when-to-use-instrument-profiles">
<h2>When to Use Instrument Profiles<a class="headerlink" href="#when-to-use-instrument-profiles" title="Link to this heading">#</a></h2>
<p>Use instrument profiles when you need to:</p>
<ol class="arabic simple">
<li><p><strong>Handle instrument-specific metadata quirks</strong>: Some microscopes store metadata in non-standard locations or formats</p></li>
<li><p><strong>Add warnings for unreliable metadata</strong>: Flag fields known to be inaccurate on specific instruments</p></li>
<li><p><strong>Detect special modes</strong>: Identify diffraction patterns, EELS spectra, etc. using instrument-specific heuristics</p></li>
<li><p><strong>Parse vendor-specific formats</strong>: Process proprietary metadata formats unique to one microscope</p></li>
<li><p><strong>Override default extraction</strong>: Use a specialized extractor for files from a specific instrument</p></li>
</ol>
<p><strong>Donâ€™t use profiles for</strong>:</p>
<ul class="simple">
<li><p>Generic file format parsing (belongs in extractors)</p></li>
<li><p>One-time data fixes (use a script instead)</p></li>
<li><p>Site-wide configuration (use environment variables or settings)</p></li>
</ul>
</section>
<section id="creating-an-instrument-profile">
<h2>Creating an Instrument Profile<a class="headerlink" href="#creating-an-instrument-profile" title="Link to this heading">#</a></h2>
<p>You have two options for creating instrument profiles:</p>
<ol class="arabic simple">
<li><p><strong>Built-in profiles</strong>: Add to the NexusLIMS codebase at <code class="docutils literal notranslate"><span class="pre">nexusLIMS/extractors/plugins/profiles/</span></code></p></li>
<li><p><strong>Local profiles</strong>: Create in a separate directory outside the codebase (recommended for site-specific instruments)</p></li>
</ol>
<section id="local-profiles-recommended-for-site-specific-instruments">
<h3>Local Profiles (Recommended for Site-Specific Instruments)<a class="headerlink" href="#local-profiles-recommended-for-site-specific-instruments" title="Link to this heading">#</a></h3>
<p>Local profiles are kept separate from the NexusLIMS codebase, making it easy to maintain site-specific customizations without worrying about git conflicts or merge issues when updating NexusLIMS.</p>
<section id="step-1a-configure-local-profiles-directory">
<h4>Step 1a: Configure Local Profiles Directory<a class="headerlink" href="#step-1a-configure-local-profiles-directory" title="Link to this heading">#</a></h4>
<p>Add to your <code class="docutils literal notranslate"><span class="pre">.env</span></code> file:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nv">NX_LOCAL_PROFILES_PATH</span><span class="o">=</span>/opt/nexuslims/local_profiles
</pre></div>
</div>
<p>Create the directory:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>mkdir<span class="w"> </span>-p<span class="w"> </span>/opt/nexuslims/local_profiles
</pre></div>
</div>
</section>
<section id="step-1b-create-a-local-profile-module">
<h4>Step 1b: Create a Local Profile Module<a class="headerlink" href="#step-1b-create-a-local-profile-module" title="Link to this heading">#</a></h4>
<p>Create a Python file in your local profiles directory (e.g., <code class="docutils literal notranslate"><span class="pre">/opt/nexuslims/local_profiles/my_instrument.py</span></code>).</p>
<p><strong>TIP:</strong> See <a class="reference download internal" download="" href="_downloads/9fc5c6a0373bd8890091fc98194ca5ba/local_profile_example.py"><span class="xref download myst">local_profile_example.py</span></a> for a complete, well-documented example you can copy and customize.</p>
<p>Basic example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="sd">&quot;&quot;&quot;Instrument profile for My Custom Microscope.&quot;&quot;&quot;</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">__future__</span><span class="w"> </span><span class="kn">import</span> <span class="n">annotations</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">logging</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">TYPE_CHECKING</span><span class="p">,</span> <span class="n">Any</span>

<span class="k">if</span> <span class="n">TYPE_CHECKING</span><span class="p">:</span>
    <span class="kn">from</span><span class="w"> </span><span class="nn">nexusLIMS.extractors.base</span><span class="w"> </span><span class="kn">import</span> <span class="n">ExtractionContext</span>

<span class="n">logger</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>


<span class="k">def</span><span class="w"> </span><span class="nf">my_custom_parser</span><span class="p">(</span>
    <span class="n">metadata</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span>
    <span class="n">context</span><span class="p">:</span> <span class="n">ExtractionContext</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Add custom metadata processing for my instrument.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    metadata</span>
<span class="sd">        Metadata dictionary with &#39;nx_meta&#39; key</span>
<span class="sd">    context</span>
<span class="sd">        Extraction context with file path and instrument info</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    dict</span>
<span class="sd">        Modified metadata dictionary</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Your custom logic here</span>
    <span class="k">if</span> <span class="s2">&quot;Some Field&quot;</span> <span class="ow">in</span> <span class="n">metadata</span><span class="p">[</span><span class="s2">&quot;nx_meta&quot;</span><span class="p">]:</span>
        <span class="c1"># Process the field</span>
        <span class="n">value</span> <span class="o">=</span> <span class="n">metadata</span><span class="p">[</span><span class="s2">&quot;nx_meta&quot;</span><span class="p">][</span><span class="s2">&quot;Some Field&quot;</span><span class="p">]</span>
        <span class="n">metadata</span><span class="p">[</span><span class="s2">&quot;nx_meta&quot;</span><span class="p">][</span><span class="s2">&quot;Processed Field&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">process_value</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">metadata</span>


<span class="c1"># Register the profile</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">nexusLIMS.extractors.base</span><span class="w"> </span><span class="kn">import</span> <span class="n">InstrumentProfile</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">nexusLIMS.extractors.profiles</span><span class="w"> </span><span class="kn">import</span> <span class="n">get_profile_registry</span>

<span class="n">my_instrument_profile</span> <span class="o">=</span> <span class="n">InstrumentProfile</span><span class="p">(</span>
    <span class="n">instrument_id</span><span class="o">=</span><span class="s2">&quot;My-Microscope-ID&quot;</span><span class="p">,</span>  <span class="c1"># Must match instrument.name from database</span>
    <span class="n">parsers</span><span class="o">=</span><span class="p">{</span>
        <span class="s2">&quot;custom_processing&quot;</span><span class="p">:</span> <span class="n">my_custom_parser</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="n">static_metadata</span><span class="o">=</span><span class="p">{</span>
        <span class="s2">&quot;nx_meta.Building&quot;</span><span class="p">:</span> <span class="s2">&quot;Building 123&quot;</span><span class="p">,</span>
        <span class="s2">&quot;nx_meta.Room&quot;</span><span class="p">:</span> <span class="s2">&quot;Room 456&quot;</span><span class="p">,</span>
    <span class="p">},</span>
<span class="p">)</span>

<span class="n">get_profile_registry</span><span class="p">()</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">my_instrument_profile</span><span class="p">)</span>

<span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Registered My Custom Microscope instrument profile&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Note:</strong> Local profiles work identically to built-in profiles - they use the same API and registration mechanism. The only difference is where the files are stored.</p>
</section>
</section>
<section id="built-in-profiles-for-contributing-to-nexuslims">
<h3>Built-in Profiles (For Contributing to NexusLIMS)<a class="headerlink" href="#built-in-profiles-for-contributing-to-nexuslims" title="Link to this heading">#</a></h3>
<p>If youâ€™re developing a profile that would benefit the broader NexusLIMS community (e.g., for a common commercial instrument), consider contributing it as a built-in profile.</p>
<p>Create a new Python file in <code class="docutils literal notranslate"><span class="pre">nexusLIMS/extractors/plugins/profiles/</span></code> following the same structure as shown above for local profiles.</p>
</section>
<section id="step-2-match-instrument-id">
<h3>Step 2: Match Instrument ID<a class="headerlink" href="#step-2-match-instrument-id" title="Link to this heading">#</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">instrument_id</span></code> in your profile must <strong>exactly match</strong> the instrumentâ€™s <code class="docutils literal notranslate"><span class="pre">name</span></code> field in the NexusLIMS database. Check your database:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">nexusLIMS.db</span><span class="w"> </span><span class="kn">import</span> <span class="n">Session_Handler</span>

<span class="n">db</span> <span class="o">=</span> <span class="n">Session_Handler</span><span class="p">()</span>
<span class="n">instruments</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">get_all_instruments</span><span class="p">()</span>
<span class="k">for</span> <span class="n">instr</span> <span class="ow">in</span> <span class="n">instruments</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Instrument: </span><span class="si">{</span><span class="n">instr</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="step-3-test-your-profile">
<h3>Step 3: Test Your Profile<a class="headerlink" href="#step-3-test-your-profile" title="Link to this heading">#</a></h3>
<p>Profiles are auto-discovered on import. Test by:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">nexusLIMS.extractors.profiles</span><span class="w"> </span><span class="kn">import</span> <span class="n">get_profile_registry</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">nexusLIMS.instruments</span><span class="w"> </span><span class="kn">import</span> <span class="n">get_all_instruments</span>

<span class="c1"># Check profile is registered</span>
<span class="n">registry</span> <span class="o">=</span> <span class="n">get_profile_registry</span><span class="p">()</span>
<span class="n">all_profiles</span> <span class="o">=</span> <span class="n">registry</span><span class="o">.</span><span class="n">get_all_profiles</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Registered profiles: </span><span class="si">{</span><span class="nb">list</span><span class="p">(</span><span class="n">all_profiles</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># Test with your instrument</span>
<span class="n">instrument</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">get_all_instruments</span><span class="p">()</span> <span class="k">if</span> <span class="n">i</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s2">&quot;My-Microscope-ID&quot;</span><span class="p">)</span>
<span class="n">profile</span> <span class="o">=</span> <span class="n">registry</span><span class="o">.</span><span class="n">get_profile</span><span class="p">(</span><span class="n">instrument</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Found profile: </span><span class="si">{</span><span class="n">profile</span><span class="w"> </span><span class="ow">is</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="kc">None</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</section>
</section>
<section id="profile-components">
<h2>Profile Components<a class="headerlink" href="#profile-components" title="Link to this heading">#</a></h2>
<section id="parser-functions">
<h3>Parser Functions<a class="headerlink" href="#parser-functions" title="Link to this heading">#</a></h3>
<p>Parser functions receive metadata and context, returning modified metadata:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">add_warnings</span><span class="p">(</span><span class="n">metadata</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span> <span class="n">context</span><span class="p">:</span> <span class="n">ExtractionContext</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Add warnings for unreliable fields.&quot;&quot;&quot;</span>
    <span class="n">warnings</span> <span class="o">=</span> <span class="n">metadata</span><span class="p">[</span><span class="s2">&quot;nx_meta&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;warnings&quot;</span><span class="p">,</span> <span class="p">[])</span>
    <span class="n">warnings</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="s2">&quot;Temperature&quot;</span><span class="p">])</span>  <span class="c1"># Temperature readings are unreliable</span>
    <span class="n">metadata</span><span class="p">[</span><span class="s2">&quot;nx_meta&quot;</span><span class="p">][</span><span class="s2">&quot;warnings&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">warnings</span>
    <span class="k">return</span> <span class="n">metadata</span>
</pre></div>
</div>
<p><strong>Guidelines:</strong></p>
<ul class="simple">
<li><p>Always return the modified metadata dictionary</p></li>
<li><p>Donâ€™t raise exceptions - log errors and return unchanged metadata</p></li>
<li><p>Keep functions focused - one parser per logical operation</p></li>
<li><p>Document what the parser does in the docstring</p></li>
</ul>
</section>
<section id="transformations">
<h3>Transformations<a class="headerlink" href="#transformations" title="Link to this heading">#</a></h3>
<p>Transformations modify specific metadata values:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">convert_to_meters</span><span class="p">(</span><span class="n">value</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Convert millimeters to meters.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">value</span> <span class="o">/</span> <span class="mf">1000.0</span>

<span class="n">profile</span> <span class="o">=</span> <span class="n">InstrumentProfile</span><span class="p">(</span>
    <span class="n">instrument_id</span><span class="o">=</span><span class="s2">&quot;My-Microscope-ID&quot;</span><span class="p">,</span>
    <span class="n">transformations</span><span class="o">=</span><span class="p">{</span>
        <span class="s2">&quot;nx_meta.Stage_X&quot;</span><span class="p">:</span> <span class="n">convert_to_meters</span><span class="p">,</span>
        <span class="s2">&quot;nx_meta.Stage_Y&quot;</span><span class="p">:</span> <span class="n">convert_to_meters</span><span class="p">,</span>
    <span class="p">},</span>
<span class="p">)</span>
</pre></div>
</div>
<p>The transformation is applied if the key exists in metadata.</p>
</section>
<section id="static-metadata">
<h3>Static Metadata<a class="headerlink" href="#static-metadata" title="Link to this heading">#</a></h3>
<p>Inject fixed values for all files from this instrument:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">profile</span> <span class="o">=</span> <span class="n">InstrumentProfile</span><span class="p">(</span>
    <span class="n">instrument_id</span><span class="o">=</span><span class="s2">&quot;My-Microscope-ID&quot;</span><span class="p">,</span>
    <span class="n">static_metadata</span><span class="o">=</span><span class="p">{</span>
        <span class="s2">&quot;nx_meta.Facility&quot;</span><span class="p">:</span> <span class="s2">&quot;My Lab&quot;</span><span class="p">,</span>
        <span class="s2">&quot;nx_meta.Building&quot;</span><span class="p">:</span> <span class="s2">&quot;Building A&quot;</span><span class="p">,</span>
        <span class="s2">&quot;nx_meta.Department&quot;</span><span class="p">:</span> <span class="s2">&quot;Materials Science&quot;</span><span class="p">,</span>
    <span class="p">},</span>
<span class="p">)</span>
</pre></div>
</div>
<p>Use dot notation for nested keys. The values are injected after extraction completes.</p>
</section>
<section id="extractor-overrides">
<h3>Extractor Overrides<a class="headerlink" href="#extractor-overrides" title="Link to this heading">#</a></h3>
<p>Force specific extractors for certain file extensions:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">profile</span> <span class="o">=</span> <span class="n">InstrumentProfile</span><span class="p">(</span>
    <span class="n">instrument_id</span><span class="o">=</span><span class="s2">&quot;My-Zeiss-SEM&quot;</span><span class="p">,</span>
    <span class="n">extractor_overrides</span><span class="o">=</span><span class="p">{</span>
        <span class="s2">&quot;tif&quot;</span><span class="p">:</span> <span class="s2">&quot;zeiss_tif_extractor&quot;</span><span class="p">,</span>  <span class="c1"># Use Zeiss-specific TIF extractor</span>
    <span class="p">},</span>
<span class="p">)</span>
</pre></div>
</div>
<p>This is useful when multiple extractors support the same extension but one works better for your instrument.</p>
</section>
</section>
<section id="examples">
<h2>Examples<a class="headerlink" href="#examples" title="Link to this heading">#</a></h2>
<p><strong>ðŸ“„ Complete Example File:</strong> For a comprehensive, production-ready example, see <a class="reference download internal" download="" href="_downloads/9fc5c6a0373bd8890091fc98194ca5ba/local_profile_example.py"><span class="xref download myst">local_profile_example.py</span></a>. This file includes:</p>
<ul class="simple">
<li><p>Multiple parser functions with detailed comments</p></li>
<li><p>Facility metadata injection</p></li>
<li><p>Warning generation for unreliable fields</p></li>
<li><p>Filename-based acquisition mode detection</p></li>
<li><p>Best practices and common patterns</p></li>
</ul>
<p>The examples below show specific use cases in isolation.</p>
<section id="example-1-simple-warning-profile">
<h3>Example 1: Simple Warning Profile<a class="headerlink" href="#example-1-simple-warning-profile" title="Link to this heading">#</a></h3>
<p>Add warnings for fields known to be unreliable:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="sd">&quot;&quot;&quot;Profile for FEI Quanta SEM with unreliable metadata.&quot;&quot;&quot;</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">nexusLIMS.extractors.base</span><span class="w"> </span><span class="kn">import</span> <span class="n">InstrumentProfile</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">nexusLIMS.extractors.profiles</span><span class="w"> </span><span class="kn">import</span> <span class="n">get_profile_registry</span>


<span class="k">def</span><span class="w"> </span><span class="nf">add_metadata_warnings</span><span class="p">(</span><span class="n">metadata</span><span class="p">,</span> <span class="n">context</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Warn about unreliable detector and operator fields.&quot;&quot;&quot;</span>
    <span class="n">warnings</span> <span class="o">=</span> <span class="n">metadata</span><span class="p">[</span><span class="s2">&quot;nx_meta&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;warnings&quot;</span><span class="p">,</span> <span class="p">[])</span>
    <span class="n">warnings</span><span class="o">.</span><span class="n">extend</span><span class="p">([[</span><span class="s2">&quot;Detector&quot;</span><span class="p">],</span> <span class="p">[</span><span class="s2">&quot;Operator&quot;</span><span class="p">]])</span>
    <span class="n">metadata</span><span class="p">[</span><span class="s2">&quot;nx_meta&quot;</span><span class="p">][</span><span class="s2">&quot;warnings&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">warnings</span>
    <span class="k">return</span> <span class="n">metadata</span>


<span class="n">quanta_profile</span> <span class="o">=</span> <span class="n">InstrumentProfile</span><span class="p">(</span>
    <span class="n">instrument_id</span><span class="o">=</span><span class="s2">&quot;FEI-Quanta-12345&quot;</span><span class="p">,</span>
    <span class="n">parsers</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;warnings&quot;</span><span class="p">:</span> <span class="n">add_metadata_warnings</span><span class="p">},</span>
<span class="p">)</span>

<span class="n">get_profile_registry</span><span class="p">()</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">quanta_profile</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="example-2-diffraction-detection-profile">
<h3>Example 2: Diffraction Detection Profile<a class="headerlink" href="#example-2-diffraction-detection-profile" title="Link to this heading">#</a></h3>
<p>Detect diffraction patterns using filename heuristics:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="sd">&quot;&quot;&quot;Profile for JEOL microscope with filename-based diffraction detection.&quot;&quot;&quot;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">logging</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">pathlib</span><span class="w"> </span><span class="kn">import</span> <span class="n">Path</span>

<span class="n">logger</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>


<span class="k">def</span><span class="w"> </span><span class="nf">detect_diffraction_from_filename</span><span class="p">(</span><span class="n">metadata</span><span class="p">,</span> <span class="n">context</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Detect diffraction patterns from common filename patterns.&quot;&quot;&quot;</span>
    <span class="n">filename</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">context</span><span class="o">.</span><span class="n">file_path</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">pattern</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;Diff&quot;</span><span class="p">,</span> <span class="s2">&quot;SAED&quot;</span><span class="p">,</span> <span class="s2">&quot;DP&quot;</span><span class="p">]:</span>
        <span class="k">if</span> <span class="n">pattern</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="ow">in</span> <span class="n">filename</span><span class="o">.</span><span class="n">lower</span><span class="p">():</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Detected diffraction pattern from &#39;</span><span class="si">{</span><span class="n">pattern</span><span class="si">}</span><span class="s2">&#39; in filename&quot;</span><span class="p">)</span>
            <span class="n">metadata</span><span class="p">[</span><span class="s2">&quot;nx_meta&quot;</span><span class="p">][</span><span class="s2">&quot;DatasetType&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;Diffraction&quot;</span>
            <span class="n">metadata</span><span class="p">[</span><span class="s2">&quot;nx_meta&quot;</span><span class="p">][</span><span class="s2">&quot;Data Type&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;TEM_Diffraction&quot;</span>
            <span class="k">break</span>

    <span class="k">return</span> <span class="n">metadata</span>


<span class="n">jeol_profile</span> <span class="o">=</span> <span class="n">InstrumentProfile</span><span class="p">(</span>
    <span class="n">instrument_id</span><span class="o">=</span><span class="s2">&quot;JEOL-JEM-TEM-565989&quot;</span><span class="p">,</span>
    <span class="n">parsers</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;diffraction_detection&quot;</span><span class="p">:</span> <span class="n">detect_diffraction_from_filename</span><span class="p">},</span>
<span class="p">)</span>

<span class="n">get_profile_registry</span><span class="p">()</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">jeol_profile</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="example-3-complex-metadata-parsing">
<h3>Example 3: Complex Metadata Parsing<a class="headerlink" href="#example-3-complex-metadata-parsing" title="Link to this heading">#</a></h3>
<p>Parse vendor-specific metadata strings:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="sd">&quot;&quot;&quot;Profile for FEI Titan TEM with Tecnai metadata parsing.&quot;&quot;&quot;</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">nexusLIMS.utils</span><span class="w"> </span><span class="kn">import</span> <span class="p">(</span>
    <span class="n">get_nested_dict_key</span><span class="p">,</span>
    <span class="n">get_nested_dict_value_by_path</span><span class="p">,</span>
    <span class="n">set_nested_dict_value</span><span class="p">,</span>
<span class="p">)</span>


<span class="k">def</span><span class="w"> </span><span class="nf">parse_tecnai_metadata</span><span class="p">(</span><span class="n">metadata</span><span class="p">,</span> <span class="n">context</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Parse FEI Tecnai metadata from delimited string.&quot;&quot;&quot;</span>
    <span class="c1"># Import processing function from DM3 extractor</span>
    <span class="kn">from</span><span class="w"> </span><span class="nn">nexusLIMS.extractors.plugins.digital_micrograph</span><span class="w"> </span><span class="kn">import</span> <span class="p">(</span>
        <span class="n">process_tecnai_microscope_info</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="c1"># Check if Tecnai metadata exists</span>
    <span class="n">path_to_tecnai</span> <span class="o">=</span> <span class="n">get_nested_dict_key</span><span class="p">(</span><span class="n">metadata</span><span class="p">,</span> <span class="s2">&quot;Tecnai&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">path_to_tecnai</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">metadata</span>

    <span class="c1"># Extract and process Tecnai microscope info</span>
    <span class="n">tecnai_value</span> <span class="o">=</span> <span class="n">get_nested_dict_value_by_path</span><span class="p">(</span><span class="n">metadata</span><span class="p">,</span> <span class="n">path_to_tecnai</span><span class="p">)</span>
    <span class="n">microscope_info</span> <span class="o">=</span> <span class="n">tecnai_value</span><span class="p">[</span><span class="s2">&quot;Microscope Info&quot;</span><span class="p">]</span>
    <span class="n">processed</span> <span class="o">=</span> <span class="n">process_tecnai_microscope_info</span><span class="p">(</span><span class="n">microscope_info</span><span class="p">)</span>

    <span class="c1"># Update metadata tree</span>
    <span class="n">tecnai_value</span><span class="p">[</span><span class="s2">&quot;Microscope Info&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">processed</span>
    <span class="n">set_nested_dict_value</span><span class="p">(</span><span class="n">metadata</span><span class="p">,</span> <span class="n">path_to_tecnai</span><span class="p">,</span> <span class="n">tecnai_value</span><span class="p">)</span>

    <span class="c1"># Map to NexusLIMS metadata fields</span>
    <span class="k">if</span> <span class="s2">&quot;Gun_Name&quot;</span> <span class="ow">in</span> <span class="n">processed</span><span class="p">:</span>
        <span class="n">metadata</span><span class="p">[</span><span class="s2">&quot;nx_meta&quot;</span><span class="p">][</span><span class="s2">&quot;Gun Name&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">processed</span><span class="p">[</span><span class="s2">&quot;Gun_Name&quot;</span><span class="p">]</span>
    <span class="k">if</span> <span class="s2">&quot;Spot&quot;</span> <span class="ow">in</span> <span class="n">processed</span><span class="p">:</span>
        <span class="n">metadata</span><span class="p">[</span><span class="s2">&quot;nx_meta&quot;</span><span class="p">][</span><span class="s2">&quot;Spot&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">processed</span><span class="p">[</span><span class="s2">&quot;Spot&quot;</span><span class="p">]</span>

    <span class="k">return</span> <span class="n">metadata</span>


<span class="n">titan_profile</span> <span class="o">=</span> <span class="n">InstrumentProfile</span><span class="p">(</span>
    <span class="n">instrument_id</span><span class="o">=</span><span class="s2">&quot;FEI-Titan-TEM-012345&quot;</span><span class="p">,</span>
    <span class="n">parsers</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;tecnai_metadata&quot;</span><span class="p">:</span> <span class="n">parse_tecnai_metadata</span><span class="p">},</span>
<span class="p">)</span>

<span class="n">get_profile_registry</span><span class="p">()</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">titan_profile</span><span class="p">)</span>
</pre></div>
</div>
</section>
</section>
<section id="built-in-profiles">
<h2>Built-in Profiles<a class="headerlink" href="#built-in-profiles" title="Link to this heading">#</a></h2>
<p>NexusLIMS includes profiles for common instruments:</p>
<section id="fei-titan-stem-643">
<h3>FEI Titan STEM (643)<a class="headerlink" href="#fei-titan-stem-643" title="Link to this heading">#</a></h3>
<p><strong>Module:</strong> <code class="docutils literal notranslate"><span class="pre">nexusLIMS.extractors.plugins.profiles.fei_titan_stem_643</span></code></p>
<p><strong>Features:</strong></p>
<ul class="simple">
<li><p>Adds warnings for unreliable Detector, Operator, and Specimen fields</p></li>
<li><p>Detects EFTEM diffraction patterns from â€œImaging Modeâ€ metadata</p></li>
</ul>
</section>
<section id="fei-titan-tem-642">
<h3>FEI Titan TEM (642)<a class="headerlink" href="#fei-titan-tem-642" title="Link to this heading">#</a></h3>
<p><strong>Module:</strong> <code class="docutils literal notranslate"><span class="pre">nexusLIMS.extractors.plugins.profiles.fei_titan_tem_642</span></code></p>
<p><strong>Features:</strong></p>
<ul class="simple">
<li><p>Parses Tecnai-specific metadata (29+ fields)</p></li>
<li><p>Detects diffraction mode from Tecnai Mode or Operation Mode</p></li>
<li><p>Handles stage position, aperture settings, and filter parameters</p></li>
</ul>
</section>
<section id="jeol-jem-tem-642-stroboscope">
<h3>JEOL JEM TEM (642 Stroboscope)<a class="headerlink" href="#jeol-jem-tem-642-stroboscope" title="Link to this heading">#</a></h3>
<p><strong>Module:</strong> <code class="docutils literal notranslate"><span class="pre">nexusLIMS.extractors.plugins.profiles.jeol_jem_642</span></code></p>
<p><strong>Features:</strong></p>
<ul class="simple">
<li><p>Detects diffraction patterns using filename heuristics (Diff, SAED, DP)</p></li>
<li><p>Adds warnings for DatasetType and Data Type (unreliable detection)</p></li>
</ul>
</section>
</section>
<section id="troubleshooting">
<h2>Troubleshooting<a class="headerlink" href="#troubleshooting" title="Link to this heading">#</a></h2>
<section id="profile-not-loading">
<h3>Profile Not Loading<a class="headerlink" href="#profile-not-loading" title="Link to this heading">#</a></h3>
<p><strong>Problem:</strong> Your profile doesnâ€™t appear in <code class="docutils literal notranslate"><span class="pre">get_all_profiles()</span></code></p>
<p><strong>Solutions:</strong></p>
<p>For <strong>local profiles</strong>:</p>
<ol class="arabic">
<li><p>Verify <code class="docutils literal notranslate"><span class="pre">NX_LOCAL_PROFILES_PATH</span></code> is set correctly in <code class="docutils literal notranslate"><span class="pre">.env</span></code></p></li>
<li><p>Check the directory exists and is readable</p></li>
<li><p>Ensure profile file ends with <code class="docutils literal notranslate"><span class="pre">.py</span></code> and doesnâ€™t start with <code class="docutils literal notranslate"><span class="pre">_</span></code></p></li>
<li><p>Look for error messages in logs during profile discovery</p></li>
<li><p>Verify registration call at bottom of module:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">get_profile_registry</span><span class="p">()</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">my_profile</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p>Check for import errors in profile module (e.g., missing dependencies)</p></li>
<li><p>Ensure <code class="docutils literal notranslate"><span class="pre">instrument_id</span></code> exactly matches database instrument name</p></li>
</ol>
<p>For <strong>built-in profiles</strong>:</p>
<ol class="arabic simple">
<li><p>Check filename - must be a <code class="docutils literal notranslate"><span class="pre">.py</span></code> file in <code class="docutils literal notranslate"><span class="pre">nexusLIMS/extractors/plugins/profiles/</span></code></p></li>
<li><p>Verify registration call at bottom of module</p></li>
<li><p>Check for import errors in profile module</p></li>
<li><p>Ensure <code class="docutils literal notranslate"><span class="pre">instrument_id</span></code> exactly matches database instrument name</p></li>
</ol>
</section>
<section id="parser-not-running">
<h3>Parser Not Running<a class="headerlink" href="#parser-not-running" title="Link to this heading">#</a></h3>
<p><strong>Problem:</strong> Parser function isnâ€™t being called</p>
<p><strong>Solutions:</strong></p>
<ol class="arabic">
<li><p>Verify instrument ID matches: compare <code class="docutils literal notranslate"><span class="pre">profile.instrument_id</span></code> with <code class="docutils literal notranslate"><span class="pre">instrument.name</span></code></p></li>
<li><p>Check extractorâ€™s <code class="docutils literal notranslate"><span class="pre">_apply_profile()</span></code> method is called</p></li>
<li><p>Add debug logging to verify profile lookup:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">profile</span> <span class="o">=</span> <span class="n">get_profile_registry</span><span class="p">()</span><span class="o">.</span><span class="n">get_profile</span><span class="p">(</span><span class="n">instrument</span><span class="p">)</span>
<span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Found profile: </span><span class="si">{</span><span class="n">profile</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</li>
</ol>
</section>
<section id="metadata-not-changed">
<h3>Metadata Not Changed<a class="headerlink" href="#metadata-not-changed" title="Link to this heading">#</a></h3>
<p><strong>Problem:</strong> Parser runs but metadata unchanged</p>
<p><strong>Solutions:</strong></p>
<ol class="arabic">
<li><p>Ensure parser returns the modified metadata dictionary</p></li>
<li><p>Check for exceptions in parser (caught and logged as warnings)</p></li>
<li><p>Verify metadata keys exist before modification</p></li>
<li><p>Test parser function in isolation:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">metadata</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;nx_meta&quot;</span><span class="p">:</span> <span class="p">{</span><span class="o">...</span><span class="p">}}</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">my_parser</span><span class="p">(</span><span class="n">metadata</span><span class="p">,</span> <span class="n">mock_context</span><span class="p">)</span>
<span class="k">assert</span> <span class="n">result</span><span class="p">[</span><span class="s2">&quot;nx_meta&quot;</span><span class="p">][</span><span class="s2">&quot;new_field&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;expected_value&quot;</span>
</pre></div>
</div>
</li>
</ol>
</section>
</section>
<section id="best-practices">
<h2>Best Practices<a class="headerlink" href="#best-practices" title="Link to this heading">#</a></h2>
<section id="keep-profiles-focused">
<h3>1. Keep Profiles Focused<a class="headerlink" href="#keep-profiles-focused" title="Link to this heading">#</a></h3>
<p>One profile per instrument. Donâ€™t create â€œgenericâ€ profiles for multiple instruments unless theyâ€™re truly identical.</p>
</section>
<section id="document-everything">
<h3>2. Document Everything<a class="headerlink" href="#document-everything" title="Link to this heading">#</a></h3>
<p>Every parser function should have a clear docstring explaining:</p>
<ul class="simple">
<li><p>What it does</p></li>
<li><p>Why itâ€™s needed (instrument quirk, vendor format, etc.)</p></li>
<li><p>What metadata it modifies</p></li>
</ul>
</section>
<section id="handle-missing-data-gracefully">
<h3>3. Handle Missing Data Gracefully<a class="headerlink" href="#handle-missing-data-gracefully" title="Link to this heading">#</a></h3>
<p>Always check if keys exist before accessing:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="s2">&quot;Field&quot;</span> <span class="ow">in</span> <span class="n">metadata</span><span class="p">[</span><span class="s2">&quot;nx_meta&quot;</span><span class="p">]:</span>
    <span class="n">value</span> <span class="o">=</span> <span class="n">metadata</span><span class="p">[</span><span class="s2">&quot;nx_meta&quot;</span><span class="p">][</span><span class="s2">&quot;Field&quot;</span><span class="p">]</span>
    <span class="c1"># process value</span>
</pre></div>
</div>
</section>
<section id="log-important-decisions">
<h3>4. Log Important Decisions<a class="headerlink" href="#log-important-decisions" title="Link to this heading">#</a></h3>
<p>Use structured logging to explain why metadata was changed:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Detected diffraction mode based on Tecnai Mode = </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">mode_value</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="write-tests">
<h3>5. Write Tests<a class="headerlink" href="#write-tests" title="Link to this heading">#</a></h3>
<p>Create tests for your profile in <code class="docutils literal notranslate"><span class="pre">tests/test_extractors/test_instrument_profile_modules.py</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">test_my_profile_parser</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Test my custom parser function.&quot;&quot;&quot;</span>
    <span class="n">metadata</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;nx_meta&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;Input Field&quot;</span><span class="p">:</span> <span class="s2">&quot;value&quot;</span><span class="p">}}</span>
    <span class="n">context</span> <span class="o">=</span> <span class="n">mock_context</span><span class="p">()</span>

    <span class="n">result</span> <span class="o">=</span> <span class="n">my_parser</span><span class="p">(</span><span class="n">metadata</span><span class="p">,</span> <span class="n">context</span><span class="p">)</span>

    <span class="k">assert</span> <span class="n">result</span><span class="p">[</span><span class="s2">&quot;nx_meta&quot;</span><span class="p">][</span><span class="s2">&quot;Output Field&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;expected_value&quot;</span>
</pre></div>
</div>
</section>
<section id="reuse-helper-functions">
<h3>6. Reuse Helper Functions<a class="headerlink" href="#reuse-helper-functions" title="Link to this heading">#</a></h3>
<p>If multiple profiles need similar logic, create helper functions in the extractor module and import them:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">nexusLIMS.extractors.plugins.digital_micrograph</span><span class="w"> </span><span class="kn">import</span> <span class="p">(</span>
    <span class="n">process_tecnai_microscope_info</span><span class="p">,</span>  <span class="c1"># Reusable helper</span>
<span class="p">)</span>
</pre></div>
</div>
</section>
</section>
<section id="advanced-topics">
<h2>Advanced Topics<a class="headerlink" href="#advanced-topics" title="Link to this heading">#</a></h2>
<section id="profile-inheritance">
<h3>Profile Inheritance<a class="headerlink" href="#profile-inheritance" title="Link to this heading">#</a></h3>
<p>Profiles donâ€™t support inheritance, but you can share parser functions:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># shared_parsers.py</span>
<span class="k">def</span><span class="w"> </span><span class="nf">common_parser</span><span class="p">(</span><span class="n">metadata</span><span class="p">,</span> <span class="n">context</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Common logic for multiple instruments.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">metadata</span>

<span class="c1"># profile_a.py</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">.shared_parsers</span><span class="w"> </span><span class="kn">import</span> <span class="n">common_parser</span>

<span class="n">profile_a</span> <span class="o">=</span> <span class="n">InstrumentProfile</span><span class="p">(</span>
    <span class="n">instrument_id</span><span class="o">=</span><span class="s2">&quot;Instrument-A&quot;</span><span class="p">,</span>
    <span class="n">parsers</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;common&quot;</span><span class="p">:</span> <span class="n">common_parser</span><span class="p">,</span> <span class="s2">&quot;specific&quot;</span><span class="p">:</span> <span class="n">specific_parser_a</span><span class="p">},</span>
<span class="p">)</span>

<span class="c1"># profile_b.py</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">.shared_parsers</span><span class="w"> </span><span class="kn">import</span> <span class="n">common_parser</span>

<span class="n">profile_b</span> <span class="o">=</span> <span class="n">InstrumentProfile</span><span class="p">(</span>
    <span class="n">instrument_id</span><span class="o">=</span><span class="s2">&quot;Instrument-B&quot;</span><span class="p">,</span>
    <span class="n">parsers</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;common&quot;</span><span class="p">:</span> <span class="n">common_parser</span><span class="p">,</span> <span class="s2">&quot;specific&quot;</span><span class="p">:</span> <span class="n">specific_parser_b</span><span class="p">},</span>
<span class="p">)</span>
</pre></div>
</div>
</section>
<section id="dynamic-profile-registration">
<h3>Dynamic Profile Registration<a class="headerlink" href="#dynamic-profile-registration" title="Link to this heading">#</a></h3>
<p>For advanced use cases, you can register profiles programmatically:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">nexusLIMS.extractors.profiles</span><span class="w"> </span><span class="kn">import</span> <span class="n">get_profile_registry</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">nexusLIMS.db</span><span class="w"> </span><span class="kn">import</span> <span class="n">Session_Handler</span>

<span class="c1"># Register profiles for all FEI instruments</span>
<span class="n">db</span> <span class="o">=</span> <span class="n">Session_Handler</span><span class="p">()</span>
<span class="k">for</span> <span class="n">instrument</span> <span class="ow">in</span> <span class="n">db</span><span class="o">.</span><span class="n">get_all_instruments</span><span class="p">():</span>
    <span class="k">if</span> <span class="s2">&quot;FEI&quot;</span> <span class="ow">in</span> <span class="n">instrument</span><span class="o">.</span><span class="n">name</span><span class="p">:</span>
        <span class="n">profile</span> <span class="o">=</span> <span class="n">create_fei_profile</span><span class="p">(</span><span class="n">instrument</span><span class="p">)</span>  <span class="c1"># Your custom function</span>
        <span class="n">get_profile_registry</span><span class="p">()</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">profile</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="profile-priority">
<h3>Profile Priority<a class="headerlink" href="#profile-priority" title="Link to this heading">#</a></h3>
<p>When multiple parsers are defined, they execute in dictionary order (Python 3.7+). If order matters, use an <code class="docutils literal notranslate"><span class="pre">OrderedDict</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">collections</span><span class="w"> </span><span class="kn">import</span> <span class="n">OrderedDict</span>

<span class="n">profile</span> <span class="o">=</span> <span class="n">InstrumentProfile</span><span class="p">(</span>
    <span class="n">instrument_id</span><span class="o">=</span><span class="s2">&quot;My-Instrument&quot;</span><span class="p">,</span>
    <span class="n">parsers</span><span class="o">=</span><span class="n">OrderedDict</span><span class="p">([</span>
        <span class="p">(</span><span class="s2">&quot;first&quot;</span><span class="p">,</span> <span class="n">parser_1</span><span class="p">),</span>
        <span class="p">(</span><span class="s2">&quot;second&quot;</span><span class="p">,</span> <span class="n">parser_2</span><span class="p">),</span>
        <span class="p">(</span><span class="s2">&quot;third&quot;</span><span class="p">,</span> <span class="n">parser_3</span><span class="p">),</span>
    <span class="p">]),</span>
<span class="p">)</span>
</pre></div>
</div>
</section>
</section>
<section id="see-also">
<h2>See Also<a class="headerlink" href="#see-also" title="Link to this heading">#</a></h2>
<ul class="simple">
<li><p><a class="reference internal" href="writing_extractor_plugins.html"><span class="std std-doc">Writing Extractor Plugins</span></a> - Learn to write new extractors</p></li>
<li><p><a class="reference internal" href="extractors.html"><span class="std std-doc">Extractors Overview</span></a> - Understanding the extraction system</p></li>
<li><p>API Reference: <a class="reference internal" href="api/nexusLIMS/nexusLIMS.extractors.base.html#nexusLIMS.extractors.base.InstrumentProfile" title="nexusLIMS.extractors.base.InstrumentProfile"><code class="xref py py-class docutils literal notranslate"><span class="pre">nexusLIMS.extractors.base.InstrumentProfile</span></code></a></p></li>
<li><p>API Reference: <a class="reference internal" href="api/nexusLIMS/nexusLIMS.extractors.profiles.html#nexusLIMS.extractors.profiles.InstrumentProfileRegistry" title="nexusLIMS.extractors.profiles.InstrumentProfileRegistry"><code class="xref py py-class docutils literal notranslate"><span class="pre">nexusLIMS.extractors.profiles.InstrumentProfileRegistry</span></code></a></p></li>
</ul>
</section>
</section>


                </article>
              
              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="writing_extractor_plugins.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Writing Extractor Plugins</p>
      </div>
    </a>
    <a class="right-next"
       href="examples.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Examples</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <dialog id="pst-secondary-sidebar-modal"></dialog>
                <div id="pst-secondary-sidebar" class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
<div
    id="pst-page-navigation-heading-2"
    class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc" aria-labelledby="pst-page-navigation-heading-2">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#overview">Overview</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#what-are-instrument-profiles">What are Instrument Profiles?</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#when-to-use-instrument-profiles">When to Use Instrument Profiles</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#creating-an-instrument-profile">Creating an Instrument Profile</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#local-profiles-recommended-for-site-specific-instruments">Local Profiles (Recommended for Site-Specific Instruments)</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#step-1a-configure-local-profiles-directory">Step 1a: Configure Local Profiles Directory</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#step-1b-create-a-local-profile-module">Step 1b: Create a Local Profile Module</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#built-in-profiles-for-contributing-to-nexuslims">Built-in Profiles (For Contributing to NexusLIMS)</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#step-2-match-instrument-id">Step 2: Match Instrument ID</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#step-3-test-your-profile">Step 3: Test Your Profile</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#profile-components">Profile Components</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#parser-functions">Parser Functions</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#transformations">Transformations</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#static-metadata">Static Metadata</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#extractor-overrides">Extractor Overrides</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#examples">Examples</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#example-1-simple-warning-profile">Example 1: Simple Warning Profile</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#example-2-diffraction-detection-profile">Example 2: Diffraction Detection Profile</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#example-3-complex-metadata-parsing">Example 3: Complex Metadata Parsing</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#built-in-profiles">Built-in Profiles</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#fei-titan-stem-643">FEI Titan STEM (643)</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#fei-titan-tem-642">FEI Titan TEM (642)</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#jeol-jem-tem-642-stroboscope">JEOL JEM TEM (642 Stroboscope)</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#troubleshooting">Troubleshooting</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#profile-not-loading">Profile Not Loading</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#parser-not-running">Parser Not Running</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#metadata-not-changed">Metadata Not Changed</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#best-practices">Best Practices</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#keep-profiles-focused">1. Keep Profiles Focused</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#document-everything">2. Document Everything</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#handle-missing-data-gracefully">3. Handle Missing Data Gracefully</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#log-important-decisions">4. Log Important Decisions</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#write-tests">5. Write Tests</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#reuse-helper-functions">6. Reuse Helper Functions</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#advanced-topics">Advanced Topics</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#profile-inheritance">Profile Inheritance</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#dynamic-profile-registration">Dynamic Profile Registration</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#profile-priority">Profile Priority</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#see-also">See Also</a></li>
</ul>
  </nav></div>

  <div class="sidebar-secondary-item">
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/instrument_profiles.md.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script defer src="_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf"></script>
<script defer src="_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item">

  <p class="copyright">
    
      Â© Copyright 2025, datasophos, LLC.
      <br/>
    
  </p>
</div>
      
    </div>
  
  
  
    <div class="footer-items__end">
      
        <div class="footer-item">
<p class="theme-version">
  <!-- # L10n: Setting the PST URL as an argument as this does not need to be localized -->
  Built with the <a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">PyData Sphinx Theme</a> 0.16.1.
</p></div>
      
    </div>
  
</div>

  </footer>
  </body>
</html>